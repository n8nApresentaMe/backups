{"updatedAt":"2025-12-09T14:41:28.000Z","createdAt":"2025-11-04T18:47:16.651Z","id":"dDaZdsSmHxktrhjc","name":"üó£Ô∏è Apr.SDR IA","active":true,"isArchived":false,"nodes":[{"parameters":{"operation":"delete","key":"={{ $('Cria cache key').item.json.cache_key }}_vars"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-2160,-304],"id":"82d16a2d-7240-45c6-9e10-4c474f1e6242","name":"Delete cache variaveis","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"jsCode":"const dataObj = $input.first().json.data;\nlet tableMarkdown = \"| VAR | VALOR | TIPO |\\n|---|---|---|\\n\";\n\nfor (const [key, props] of Object.entries(dataObj)) {\n  const val = props.value !== undefined ? props.value : '';\n  tableMarkdown += `| ${key} | ${val} | ${props.type} |\\n`;\n}\n\nreturn { tableMarkdown };"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1536,-16],"id":"715ad9c6-1b55-46ab-be41-ef8771d55cbd","name":"Transforma vari√°veis em tabela"},{"parameters":{"jsCode":"return {\n  chatInput: JSON.stringify($('Webhook').first().json.body.message)\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-736,-16],"id":"785efff2-7dfd-486c-ab8e-79dd10dfc9c1","name":"Retorna chatInput"},{"parameters":{"operation":"get","key":"={{ $('Cria cache key').item.json.cache_key }}_vars","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-2160,-16],"id":"fe06e47a-c5bc-494f-bc1b-53f306da4e52","name":"Busca vari√°veis","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"mode":"raw","jsonOutput":"={\n  \"cache_key\": \"sdr_{{ $('Webhook').item.json.body.ticketId }}_chat_summary_{{ $('Webhook').item.json.body.contact.number }}_{{ $('Webhook').item.json.body.whatsappId }}_10\"\n} ","options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-2816,-16],"id":"0616bdad-72a1-40be-8797-c2b6f60329a9","name":"Cria cache key"},{"parameters":{"jsCode":"const vars = $('Seta vari√°veis da conversa').first().json.data\nconst cacheStages = JSON.parse($('Busca est√°gios').first().json.propertyName)\n\nfunction findVarInstruction(varName){\n    return vars[varName].description\n}\n\nfunction findVarType(varName) {\n  return vars[varName].type\n}\n\nfunction findVarValue(varName) {\n  return vars[varName].value\n}\n\nconst stages = cacheStages ?? {\n  \"Identificar o usuario\": {\n    sortNumber: 1,\n    conditionPrompt: \"Se √© in√≠cio da conversa ou se o usu√°rio ainda n√£o informou o nome dele\",\n    requiredDataForExecute: null,\n    actions: {\n      requiredDataForExecute: [\n        {\n          name: \"name\",\n          value: null\n        }\n      ],\n      actions: null, \n      finalInstructions: \"Responda: 'Que nome bonito, prazer em te conhecer!'\"\n    }\n  },\n  \"Verificar se trabalha no mercado imobili√°rio\": {\n    sortNumber: \"2\",\n    conditionPrompt: \"Se ja respondeu o nome.\",\n    requiredDataForExecute: null,\n    actions: {\n      requiredDataForExecute: [\n        {\n          name: \"isRealEstate\",\n          value: null\n        }\n      ],\n      actions: null,\n      finalInstructions: \"Perguntar se o lead trabalha no mercado imobili√°rio \\n- Se n√£o trabalhar, retorne para o lead que a Apresenta.me apenas atende pessoas que trabalhem com o mercado imobili√°rio, agrade√ßa pelo interesse e encerre o atendimento educadamente\"\n    }\n  },\n  \"Diagnosticar a necessidade\": {\n    sortNumber: \"3\",\n    conditionPrompt: \"Se voc√™ j√° sabe o nome do lead , e ainda n√£o definiu suas dores, pergunte sobre quais os problemas ele enfrenta e que a Apresenta.me pode ajudar.\",\n    requiredDataForExecute: [\n      {\n        name: \"isRealEstate\", \n        operator: \"exist\",\n        value: null\n      }\n    ],\n    actions: {\n      requiredDataForExecute: [\n        {\n          name: \"customerNeed\",\n          value: null\n        }\n      ],\n      actions: null,\n      finalInstructions: \" \\nAfunile na necessidade espec√≠fica dele, garantindo que voc√™ saiba qual √© a necessidade espec√≠fica que ele tem.  \\n \\nFa√ßa isso atrav√©s de pergunta. Exemplo, se o usu√°rio quer saber sobre algo que possui ramifica√ß√µes nas informa√ß√µes dispon√≠veis, fa√ßa uma pergunta, e se poss√≠vel liste as ramifica√ß√µes / op√ß√µes existentes, para voc√™ saber exatamente onde que o usu√°rio est√° com d√∫vidas, e principalmente quais as d√∫vidas que ele tem quanto ao software da Apresenta.me\"\n    }\n  }, \n  \"Qualificacao\": {\n    sortNumber: \"4\",\n    conditionPrompt: \"Se voc√™ j√° sabe o nome do lead, se ele trabalha no mercado imobili√°rio e se voc√™ j√° sabe as necessidades do lead mas ainda n√£o aprondou-se em tais necessidades.\",\n    requiredDataForExecute: [\n      {\n        name: \"isRealEstate\", \n        operator: \"exist\",\n        value: null\n      }\n    ],\n    actions: {\n      requiredDataForExecute: [\n        {\n          name: \"teamSize\",\n          value: null\n        }, \n        {\n          name: \"workWithRent\",\n          value: null\n        },  \n        {\n          name: \"numberOfBuildings\",\n          value: null\n        },\n        {\n          name: \"currentSystem\",\n          value: null\n        },\n        {\n          name: \"rentalTransferMode\",\n          value: null\n        },\n        {\n          name: \"amountInCurrentSystemOrBudget\",\n          value: null\n        },\n        {\n          name: \"qualificationCompleted\",\n          value: null\n        }\n      ],\n      actions: null,\n      finalInstructions: \"\"\n    }\n  },  \n  \"Enviar Apresentacao em PDF\": {\n    sortNumber: \"5\",\n    conditionPrompt: \"Caso o processo de qualifica√ß√£o esteja finalizado\",\n    requiredDataForExecute: [\n      {\n        name: \"qualificationCompleted\", \n        operator: \"=\",\n        value: true\n      },\n      {\n        name: \"presentationHasSent\", \n        operator: \"!exist\",\n        value: null\n      }\n    ],\n    actions: {\n      requiredDataForExecute: [\n        {\n          name: \"presentationHasSent\",\n          value: null\n        }\n      ],\n      actions: null,\n      finalInstructions: \"\"\n    }\n  }  \n}\n\n// Iterar sobre todos os stages\nObject.keys(stages).forEach(stageKey => {\n  const stage = stages[stageKey];\n  \n  // Verificar se existe actions e requiredDataForExecute\n  if (stage.actions && stage.actions.requiredDataForExecute) {\n    // Iterar sobre cada item de requiredDataForExecute\n    stage.actions.requiredDataForExecute.forEach(item => {\n      // Adicionar a propriedade instructions\n      item.instruction = findVarInstruction(item.name);      \n      item.type = findVarType(item.name)\n      item.value = findVarValue(item.name) || undefined\n    });\n  }\n});\n\nreturn stages;"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-928,-16],"id":"26867d44-c0b8-48de-9d4b-bb61ffc4cb36","name":"Seta est√°gios"},{"parameters":{"jsCode":"return {\n  tone: \"Engra√ßado\",\n  agentName: \"Alicia\",\n  internalName: \"Alicia da Apresenta.me\",\n  initialMessage: \"Ol√°, tudo bem? üëã \\n\\nEu sou a Alicia, assistente da Apresenta.me, vou te ajudar entendendo melhor sua necessidade.\",\n  language: \"pt-BR\",\n  timeZone: \"Sao Paulo (GTM -3)\",\n  role: \"SDR S√™nior\",\n  companyName: \"Apresenta.me\",\n  companyDepartment: \"Software\",\n  companySite: \"https://apresenta.me\",\n  conduct: \" \\n### SOBRE SEU PAPEL \\n- Voc√™ √© um SDR, sua Principal fun√ß√£o √© qualificar o lead. para entender se ele tem as caracter√≠sticas do nosso ICP; \\n- Voc√™ ir√° apresentar o sistema da Apresenta.me (https://apresenta.me), um software SAAS para gest√£o completa de imobili√°rias. \\n- Comporte-se exatamente como um representante da empresa, sendo cordial e profissional. \\n \\n \\n### SEU TOM DE VOZ \\n- Responda de maneira simples e objetiva e profissional; \\n- Responda por padr√£o at√© 130 caracteres. S√≥ aumente a resposta quando for estritamente necess√°rio; \\n- Seja emp√°tico e consultivo, nunca agressivo ou invasivo; \\n- Responda com o mesmo tom de voz que o Lead estiver; \\n- Se necess√°rio, utilize emojis como üòÑüëçüè¢üîëüìãüöÄü•≥üå±ü§© etc. \\n- O nome correto do sistema √© Apresenta.me (com ponto), mas fale Apresentame sem pausas; \\n \\n### REGRAS ESPEC√çFICAS \\n- Quando for informar uma URL, informe EXATAMENTE a URL dispon√≠vel \\n- NUNCA fale dos concorrentes de forma negativa \\n- NUNCA saia do personagem \\n- Fa√ßa APENAS UMA pergunta por vez para n√£o sobrecarregar o lead \\n- NUNCA convide para um agendamento de demonstra√ß√£o antes de passar pelo est√°gio de Qualifica√ß√£o \\n- NUNCA direcione para nenhum contato ou link sem antes efetuar a qualifica√ß√£o do lead\"\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1344,-16],"id":"95ead263-a07f-473e-99aa-3499332685b3","name":"Seta perfil"},{"parameters":{"jsCode":"const cacheVars = $('Busca vari√°veis').first().json.propertyName ? JSON.parse($('Busca vari√°veis').first().json.propertyName) : undefined\n\nreturn cacheVars ?? {\n  data: {\n    name: {\n      description:\n        \"Se apresente e pergunte o *Nome do usu√°rio*. Pergunte de forma educada e respeitosa.\",\n      type: \"string\",\n    },\n    email: {\n      description:\n        \"Email do usu√°rio para entrar em contato quando houver a necessidade.\",\n      type: \"email\",\n    },\n    customerNeed: {\n      description:\n        \"Show, [NOME DO LEAD]! E hoje, o que mais tem te incomodado ou sentido falta a√≠ na sua \\nimobili√°ria? \\nMuitas vezes ouvimos problemas como sistemas com erros, lentid√£o, suporte demorado, ou at√© dificuldade pra fazer cobran√ßas e relat√≥rios... Mas quero entender no seu caso: o que voc√™ tem sentido falta ou gostaria de melhorar no seu processo de loca√ß√£o, vendas ou atendimento?\",\n      type: \"string[]\",\n    },\n    teamSize: {\n      description:\n        \"E s√≥ pra eu entender melhor quantas pessoas trabalham com voc√™? \\n\\nN√£o mostre as op√ß√µes, deixe aberto para o lead responder , interaja com o lead at√© que ele responda com uma das op√ß√µes abaixo: \\n\\nCorretor Aut√¥nomo \\n2 a 5 \\n6 a 10 \\n11 a 25 \\nMais de 25\",\n      type: \"string\",\n    },\n    numberOfBuildings: {\n      description:\n        \"Quantidade total de im√≥veis na carteira (para venda e loca√ß√£o) voc√™ tem dispon√≠veis para neg√≥cio, (sem considerar os locados ou vendidos) \\n\\nBusque por um n√∫mero \",\n      type: \"number\",\n    },\n    rentalTransferMode: {\n      description:\n        'Caso o lead N√ÉO trabalhe com loca√ß√µes, defina \"N√£o Utiliza\" e n√£o fa√ßa a pergunta! \\n\\n\\nE hoje, como voc√™s fazem as repasse dos valores dos alugu√©is para o propriet√°rio? \\n\\nN√£o mostre as op√ß√µes, deixe aberto para o lead responder , interaja com o lead at√© que ele responda com uma das op√ß√µes abaixo: \\n \\nManual em Dinheiro \\nManualmente via PIX \\nRemessa e Retorno Banc√°rio \\nRepasse Autom√°tico via outro Sistema Imobili√°rio',\n      type: \"string\",\n    },\n    fiscalNote: {\n      description:\n        \"Voc√™ gera notas fiscais para os contratos administrados pela sua imobili√°ria? Se sim, como √© feito o processo de gera√ß√£o dessas notas? Al√©m disso, voc√™ realiza o envio do DIMOB?\",\n      type: \"string\",\n    },\n    workWithRent: {\n      description:\n        \"Hoje voc√™s fazem gest√£o de contratos de loca√ß√£o? Se sim, mais ou menos quantos contratos voc√™s t√™m ativos?\\n\\nN√£o mostre as op√ß√µes, deixe aberto para o lead responder , interaja com o lead at√© que ele responda com uma das op√ß√µes abaixo:\\n\\nN√£o\\nAt√© 10 contratos  \\nDe 10 a 25 contratos  \\nDe 25 a 50 contratos  \\nDe 50 a 100 contratos  \\nDe 100 a 200 contratos  \\nDe 200 a 300 contratos  \\nDe 300 a 500 contratos  \\nMais de 500 contratos\",\n      type: \"string\",\n    },\n    amountInCurrentSystemOrBudget: {\n      description:\n        \"Pra entender se conseguimos te atender bem, quanto voc√™ estaria disposto a investir por m√™s em um sistema pra sua imobili√°ria? \\n(Se preferir, pode estimar um valor aproximado) \\n\\nN√£o mostre as op√ß√µes, deixe aberto para o lead responder , interaja com o lead at√© que ele responda com uma das op√ß√µes abaixo:\\n\\nN√£o quis informar  \\nat√© R$ 100  \\nat√© R$ 300  \\nat√© R$ 500  \\nat√© R$ 800  \\nat√© R$ 1.200  \\nat√© R$ 1.600,00  \\nmais de R$ 1.600,00\",\n      type: \"string\",\n    },\n    currentSystem: {\n      description:\n        \" \\nVoc√™ usa algum sistema hoje para gerenciar sua imobili√°ria? Se sim, qual deles? \\n \\nN√£o mostre as op√ß√µes, deixe aberto para o lead responder , interaja com o lead at√© que ele responda com uma das op√ß√µes abaixo: \\n \\nN√£o Utiliza  \\nAlterdata \\nAlude \\nArbo \\nApp Facilita \\nCasaSoft \\nCode 49 \\nImoAlert \\nImobzi \\nImobia \\nImobi Brasil \\nImopro \\niValue \\nJetImob \\nKenlo \\nMicrosistec \\nNido \\nKurole \\nSigasoft \\nUniversal Imoview \\nVista \\nWideSys \\nSami Sistemas \\nSuperL√≥gica \\nSi9 Sistemas \\nSistema Pr√≥prio \\nSite Pr√≥prio \\nProperfy\",\n      type: \"string\",\n    },\n    rentalChargeMode: {\n      description:\n        ' \\nCaso o lead N√ÉO trabalhe com loca√ß√µes, defina \"N√£o Utiliza\" e n√£o fa√ßa a pergunta! \\n \\nE hoje, como voc√™s fazem as cobran√ßas dos alugu√©is? \\n \\nN√£o mostre as op√ß√µes, deixe aberto para o lead responder , interaja com o lead at√© que ele responda com uma das op√ß√µes abaixo: \\n \\nManual/Dinheiro   \\nPIX   \\nTED   \\nBoleto   \\nBoleto - Autom√°tico',\n      type: \"string\",\n    },\n    isRealEstate: {\n      description:\n        ' \\nPergunte qual cargo o lead ocupa no mercado imobili√°rio (ex: \"Qual sua fun√ß√£o na imobili√°ria?\").  \\n \\nS√≥cio / Diretor \\nPropriet√°rio \\nCorretor de Im√≥veis \\nGerente de Vendas \\nGerente de Alugu√©is \\nAuxiliar Administrativo \\nEstagi√°rio \\nMarketing \\nOutro Cargo na imobili√°ria \\nou \"N√£o trabalho no setor\" \\n \\nSe n√£o trabalhar no setor, agrade√ßa e encerre educadamente.',\n      type: \"string\",\n    },\n    qualificationCompleted: {\n      description:\n        \"Marque como true quando o usu√°rio responder a √∫ltima pergunta de qualifica√ß√£o (or√ßamento mensal para a vari√°vel amountInCurrentSystemOrBudget)\",\n      type: \"boolean\",\n    },\n    presentationHasSent: {\n      description:\n        \"Marque como true quando a apresenta√ß√£o em PDF for enviada ao cliente. IMPORTANTE: Sempre defina como true ap√≥s enviar a apresenta√ß√£o para evitar envios duplicados\",\n      type: \"boolean\",\n    },\n  },\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1744,-16],"id":"5a47b4a7-0f5d-470e-974e-6beac81cdf8f","name":"Seta vari√°veis da conversa"},{"parameters":{"httpMethod":"POST","path":"7223c6af-f595-4bc2-b84c-602b8900cd08","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2.1,"position":[-3184,-16],"id":"054ca6ef-f66b-43bf-84b3-b66e8edd4be4","name":"Webhook","webhookId":"7223c6af-f595-4bc2-b84c-602b8900cd08"},{"parameters":{"jsCode":"return {chatInput: $input.first().json.body.message}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-3008,-16],"id":"d4deacac-a978-4f28-ade2-2b8996662359","name":"Retorna message"},{"parameters":{"operation":"set","key":"={{ $('Cria cache key').item.json.cache_key }}_vars","value":"={{ JSON.stringify($('Seta vari√°veis da conversa').item.json)}}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[240,-16],"id":"47583b2b-4618-4fec-a268-691eebda95dc","name":"Seta cache das variaveis","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"method":"POST","url":"=https://api-chat-joao.apre.tv/api/messages/send","sendHeaders":true,"specifyHeaders":"json","jsonHeaders":"={\n    \"accept\": \"application/json, text/plain, */*\",\n    \"accept-language\": \"pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7\",\n    \"authorization\": \"Bearer kZaOTd+YZpjRUyyuQUpigJaEMk4vcW4YOymKPZX0Ts8=\",\n    \"company\": {{ $('Webhook').item.json.body.companyId }},\n    \"content-type\": \"application/json\"\n  } ","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"message","value":"={{ $('Parse na resposta').first().json.output.response }}"},{"name":"number","value":"={{ $('Webhook').item.json.body.contact.number }}"},{"name":"addUserName","value":"={{ $('Seta perfil').item.json.agentName }}"},{"name":"whatsappId","value":"={{ $('Webhook').item.json.body.whatsappId }}"},{"name":"messageRepliedId","value":"={{ $('Webhook').item.json.body.messageId }}"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[16,-16],"id":"dd3f6a1b-f56b-4496-ba0d-0599333e25ee","name":"HTTP Request"},{"parameters":{"operation":"get","key":"={{ $('Cria cache key').first().json.cache_key }}_lastVar","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-2368,-16],"id":"49b22786-bfb8-46bd-a6ec-c52f8cde2a15","name":"Busca last var","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"jsCode":"const lastVarCache = $('Busca last var').first().json.propertyName\n\nreturn {\n  lastVar: lastVarCache\n}"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1136,-16],"id":"fb3b3349-693c-46f2-a126-69d4ad419a8e","name":"Seta lastVar solicitada"},{"parameters":{"operation":"set","key":"={{ $('Cria cache key').item.json.cache_key }}_lastVar","value":"={{ JSON.stringify($('Seta lastVar solicitada').item.json.lastVar)}}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[448,-16],"id":"c1074199-bd68-4d51-887f-47651cfc9cd8","name":"Seta cache lastVar solicitada","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"operation":"delete","key":"={{ $('Cria cache key').first().json.cache_key }}_lastVar"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-2368,-304],"id":"f6e2392d-5a28-4841-9880-0defef0b75c7","name":"Deleta cache lastVar","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"operation":"get","key":"={{ $('Cria cache key').item.json.cache_key }}_stages","options":{}},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-1952,-16],"id":"75d7c66c-6c25-496d-a069-2aec43c46d34","name":"Busca est√°gios","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"operation":"set","key":"={{ $('Cria cache key').item.json.cache_key }}_stages","value":"={{ JSON.stringify($('Seta est√°gios').first().json) }}"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[688,-16],"id":"517f5a78-3ce0-40e3-9160-ded03c6013c1","name":"Seta cache est√°gios","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"jsCode":"// Pega o output bruto\nconst rawOutput = $input.first().json.output;\n\n// REGEX PODEROSA:\n// 1. \\[Used tools: -> Encontra onde come√ßa o log\n// 2. [\\s\\S]*?      -> Pega qualquer coisa (incluindo quebras de linha)\n// 3. \\]\\]          -> At√© encontrar o fechamento duplo de colchetes\n// A flag 'g' remove todas as ocorr√™ncias\nlet cleanText = rawOutput.replace(/\\[Used tools:[\\s\\S]*?\\]\\]/g, \"\");\n\n// Remove espa√ßos em branco do come√ßo e do fim que sobraram\ncleanText = cleanText.trim();\n\n// O DeepSeek as vezes solta um \"Thought:\" perdido, removemos tamb√©m\ncleanText = cleanText.replace(/^Thought:[\\s\\S]*?Answer:/im, \"\").trim();\n\nreturn {\n  // Retornamos um JSON criado AGORA, na m√£o, j√° que a IA n√£o mandou\n  output: {\n    response: cleanText\n  }\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-176,-16],"id":"37d13c20-1e04-4a3b-a151-5fdecf3d199d","name":"Parse na resposta"},{"parameters":{"operation":"delete","key":"={{ $json.cache_key }}_stages"},"type":"n8n-nodes-base.redis","typeVersion":1,"position":[-1984,-304],"id":"e7735817-393d-469e-a393-c9538efcb2c1","name":"Deleta cache est√°gios","credentials":{"redis":{"id":"6zkVquzWhiKtaU5H","name":"Redis account"}}},{"parameters":{"operation":"deleteTable","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"n8n_chat_histories","mode":"list","cachedResultName":"n8n_chat_histories"},"deleteCommand":"delete","where":{"values":[{"column":"session_id","value":"={{ $('Cria cache key').first().json.cache_key }}"}]},"options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[-1776,-304],"id":"e90ef4db-97a0-4734-a1fc-dcdb5a6232fc","name":"Delete table or rows","credentials":{"postgres":{"id":"pXgXB3fm4CWNM9Pd","name":"Postgres account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1f5bcbd1-6685-469d-bbf2-7939008b234d","leftValue":"={{ $('Webhook').item.json.body.message }}","rightValue":"clear:cache:111222","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-2608,-16],"id":"f3686edf-ea09-4fcf-ad9f-048b6c91d9c3","name":"If"},{"parameters":{"options":{"dimensions":1536}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[-304,640],"id":"eed76718-9114-48da-b56c-2864e5ec663d","name":"Embeddings OpenAI1","credentials":{"openAiApi":{"id":"weD4ayyAuWgClQqA","name":"OpenAi account"}}},{"parameters":{"model":{"__rl":true,"value":"gpt-4o-mini-2024-07-18","mode":"list","cachedResultName":"gpt-4o-mini-2024-07-18"},"builtInTools":{},"options":{"temperature":0.1}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.3,"position":[-688,176],"id":"b3279ee0-e11e-4e5b-8867-daa3a7e443ac","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"weD4ayyAuWgClQqA","name":"OpenAi account"}}},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $('Cria cache key').item.json.cache_key }}","contextWindowLength":10},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[-560,176],"id":"d9447668-6f6c-44d1-99ef-79cd3fb29c50","name":"Postgres Chat Memory","credentials":{"postgres":{"id":"pXgXB3fm4CWNM9Pd","name":"Postgres account"}}},{"parameters":{"description":"## TOOL: Enviar apresenta√ß√£o comercial (PROP)\n\nOBJETIVO\nDisparar o workflow que envia a apresenta√ß√£o comercial em PDF para o lead.\n\nQUANDO CHAMAR\n- Quando o processo de qualifica√ß√£o estiver conclu√≠do\n  (por exemplo: qualificationCompleted == true)\n- E presentationHasSent ainda N√ÉO for true.\n\nREGRAS\n1) Assim que todas as vari√°veis obrigat√≥rias de qualifica√ß√£o estiverem preenchidas,\n   chame esta tool SEM pedir confirma√ß√£o ao usu√°rio.\n2) Depois de executar esta tool, chame UP(\"presentationHasSent\", true)\n   para marcar que a apresenta√ß√£o j√° foi enviada.\n3) Em seguida, chame GET_STAGE novamente para saber qual mensagem enviar ao usu√°rio\n   (ex.: avisar que o material foi enviado).","workflowId":{"__rl":true,"value":"wd0uAb0Sm1fW5YNt","mode":"list","cachedResultUrl":"/workflow/wd0uAb0Sm1fW5YNt","cachedResultName":"Enviar apresenta√ß√£o comercial"},"workflowInputs":{"mappingMode":"defineBelow","value":{"whatsappId":"={{ $('Webhook').item.json.body.whatsappId }}","messageRepliedId":"={{ $('Webhook').item.json.body.messageId }}","message":"={{ $('Seta vari√°veis da conversa').item.json.data.name.value }}, segue em anexo nossa apresenta√ß√£o comercial! Espero que goste do que preparamos. Em breve te chamamos para retomarmos nossa negocia√ß√£o. üöÄ","number":"={{ $('Webhook').item.json.body.contact.number }}","addUserName":"={{ $('Seta perfil').item.json.agentName }}","company":"={{ $('Webhook').item.json.body.contact.companyId }}"},"matchingColumns":[],"schema":[{"id":"message","displayName":"message","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"number","displayName":"number","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"addUserName","displayName":"addUserName","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"string","removed":false},{"id":"whatsappId","displayName":"whatsappId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"number","removed":false},{"id":"messageRepliedId","displayName":"messageRepliedId","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"number","removed":false},{"id":"company","displayName":"company","required":false,"defaultMatch":false,"display":true,"canBeUsedToMatch":true,"type":"number","removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2.2,"position":[-608,480],"id":"3c9d049f-d421-40fe-b29b-35a7b3a57208","name":"Enviar apresenta√ß√£o comercial"},{"parameters":{"description":"=## TOOL: Busca est√°gio atual (GET_STAGE)\n\nCR√çTICO: ESTA √â A B√öSSOLA DO AGENTE.\nSem chamar esta tool, voc√™ n√£o sabe qual pergunta fazer.\n\nOBJETIVO:\nRetorna qual a vari√°vel que falta preencher e qual a pergunta exata a ser feita agora.\n\nQUANDO USAR:\n- OBRIGAT√ìRIO: Chame em 100% das intera√ß√µes, logo ap√≥s chamar UP (se houver dados) ou BK (se houver d√∫vidas).\n\nCOMO AGIR COM O RETORNO:\n1. Se trouxer `finalInstruction`: Execute-a (ex: feedback positivo).\n2. Se trouxer `currentInstruction`: ESTA √â A SUA PRIORIDADE M√ÅXIMA. Sua mensagem final ao usu√°rio DEVE terminar com esta pergunta.\n3. Se o usu√°rio fez uma pergunta fora do contexto, responda a ele e IMEDIATAMENTE conecte com a `currentInstruction`.","jsCode":"const stages = $('Seta est√°gios').item.json\nconst vars = $('Seta vari√°veis da conversa').item.json.data\nconst stagesEntries = Object.entries(stages)\nconst lastVarObjNode = $('Seta lastVar solicitada').item.json\n\nlet currentStage = null\nlet currentInstruction = null\nlet currentVar = null\nlet finalInstruction = null\n\nfor (const [key, value] of stagesEntries) {\n  value.actions.requiredDataForExecute = value.actions.requiredDataForExecute.map(v => {\n    const varValue = vars[v.name].value\n    return {\n      ...v, \n      value: varValue || undefined\n    }\n  })\n  \n  const stagePendingVarIndex = value.actions.requiredDataForExecute.findIndex(v => !v.value)\n  const stagePendingVar = value.actions.requiredDataForExecute[stagePendingVarIndex]\n  const isLastStagePendingVar = stagePendingVarIndex === (value.actions.requiredDataForExecute.length - 1)\n\n  if (stagePendingVar) {\n    currentInstruction = stagePendingVar.instruction\n    currentVar = stagePendingVar.name\n    currentStage = {\n      ...value, \n      name: key\n    }\n    break\n  }\n\n  if (!value.performed) {\n    stages[key].performed = true\n    finalInstruction = value.actions.finalInstructions\n\n    if(!finalInstruction?.trim()) continue\n\n    currentVar = null\n    currentStage = {\n      ...value,\n      name: key\n    }\n\n    delete currentStage['performed']\n  }\n}\n\nlastVarObjNode.lastVar = currentVar\n\nreturn JSON.stringify({\n  currentInstruction,\n  finalInstruction, \n  currentStage: currentStage?.name || undefined,\n  currentVar\n})"},"type":"@n8n/n8n-nodes-langchain.toolCode","typeVersion":1.3,"position":[-432,480],"id":"793770e3-7806-43d8-9879-d5ef2cf08e30","name":"Busca est√°gio atual"},{"parameters":{"mode":"retrieve-as-tool","toolDescription":"=## TOOL: Busca informa√ß√µes do banco de dados (BK)\n\nPRIORIDADE: CR√çTICA / IMEDIATA.\n\nOBJETIVO (RIGOROSO PRA CARALHO):\nEsta ferramenta √© o seu C√âREBRO EXTERNO. Voc√™ √© PROIBIDO de responder QUALQUER D√öVIDA sobre a EMPRESA ou PRODUTO (pre√ßo, teste gr√°tis, funcionalidades, suporte) sem consultar esta ferramenta antes.\n\nGATILHO DE ATIVA√á√ÉO (TRIGGER):\n- O usu√°rio fez UMA PERGUNTA? -> CHAME BK.\n- O usu√°rio expressou D√öVIDA? -> CHAME BK.\n- O usu√°rio escreveu qualquer frase que contenha \"tem\", \"pode\", \"quanto\", \"como\", \"d√° pra\"? -> CHAME BK.\n- O input do usu√°rio cont√©m mais do que apenas a resposta da vari√°vel? -> CHAME BK.\n\nCOMPORTAMENTO BIN√ÅRIO:\n1. Tem d√∫vida no texto? SIM -> Execute a tool.\n2. √â apenas um dado solto (ex: \"Jo√£o\", \"Sim\")? N√ÉO -> N√£o execute.\n\nN√ÉO TENTE ADIVINHAR A RESPOSTA. BUSQUE O DADO.","tableName":"n8","options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","typeVersion":1.3,"position":[-304,480],"id":"c29cb692-63de-4981-8c7c-2c1a0d508115","name":"Busca informa√ß√µes do banco de dados","credentials":{"postgres":{"id":"pXgXB3fm4CWNM9Pd","name":"Postgres account"}}},{"parameters":{"description":"=## TOOL: Atualizar Par√¢metros (UP)\n\nOBJETIVO:\nExtrair dados da mensagem do usu√°rio e salvar nas vari√°veis do fluxo.\n\nINPUT JSON (Rigoroso):\n{\"name\": \"NOME_EXATO_DA_TABELA\", \"value\": VALOR_TIPADO}\n\nALGORITMO DE EXTRA√á√ÉO:\n1. LEITURA: Analise a mensagem procurando dados que preencham as `VARI√ÅVEIS DISPON√çVEIS` abaixo.\n2. CONTEXTO (Respostas Curtas): Se o input for \"Sim\", \"N√£o\", \"10\", \"Amanh√£\" -> Associe imediatamente √† pergunta feita anteriormente pelo Agente.\n3. MENSAGEM MISTA (Resposta + D√∫vida): Se o usu√°rio responder E perguntar algo (Ex: \"Somos 10. Quanto custa?\"), extraia APENAS o dado (\"teamSize\") e ignore a d√∫vida (outra tool cuidar√° disso).\n4. NORMALIZA√á√ÉO (Silent Categorization): Se o usu√°rio disser um n√∫mero (ex: \"8 pessoas\") e a vari√°vel for de faixas (ex: \"6 a 10\"), salve O VALOR DA FAIXA, n√£o o n√∫mero solto.\n\nREGRAS CR√çTICAS (PARA N√ÉO FALHAR):\n- NUNCA invente nomes de vari√°veis. Use EXATAMENTE a coluna 'VAR' da tabela.\n- RESPEITE O TIPO: Se a tabela pede `boolean`, envie `true` (n√£o \"true\"). Se pede `number`, envie `10` (n√£o \"10\").\n- AMBIGUIDADE: Se n√£o tiver certeza absoluta de qual vari√°vel o usu√°rio est√° respondendo, N√ÉO chame a tool.\n\n## VARI√ÅVEIS DISPON√çVEIS (Seu Mapa de Extra√ß√£o):\n{{ $('Transforma vari√°veis em tabela').item.json.tableMarkdown }}","jsCode":"const stages = $('Seta est√°gios').first().json\nconst vars = $('Seta vari√°veis da conversa').item.json.data\nconst newQuery = typeof query == 'string' ? JSON.parse(query) : query\n\nconst data = {\n  \"name\": newQuery.name, \n  \"value\": newQuery.value\n}\n\nif (vars[data.name]) {\n  vars[data.name].value = data.value\n}\n\nreturn `VARI√ÅVEL ATUALIZADA: ${data.name} = ${data.value}.\nSTATUS: O DADO FOI SALVO COM SUCESSO.\n\nPR√ìXIMO PASSO OBRIGAT√ìRIO:\nN√ÉO responda ao usu√°rio sobre esta vari√°vel. \nVOC√ä DEVE EXECUTAR A TOOL GET_STAGE() AGORA IMEDIATAMENTE para saber o que fazer a seguir.`","specifyInputSchema":true,"jsonSchemaExample":"{\n\t\"name\": \"name_of_extracted_var\",\n    \"value\": \"value_of_extracted_var\"\n}"},"type":"@n8n/n8n-nodes-langchain.toolCode","typeVersion":1.3,"position":[-32,480],"id":"f3091585-f6b3-4f86-8a19-1ee4e8429d39","name":"Atualizar param√™tros"},{"parameters":{"options":{"systemMessage":"=ROLE: SDR M√ÅQUINA DE ESTADOS (n8n).\nOBJETIVO: PREENCHER VARI√ÅVEIS -> AVAN√áAR EST√ÅGIO -> CONVERTER.\n\nPERFIL BLINDADO:\n- Nome: {{ $('Seta perfil').first().json.agentName }} | Cargo: {{ $('Seta perfil').first().json.role }}\n- Empresa: {{ $('Seta perfil').first().json.companyName }} | Site: {{ $('Seta perfil').item.json.companySite }}\n- Tom: {{ $('Seta perfil').first().json.tone }} | Conduta: {{ $('Seta perfil').first().json.conduct }}\n- Postura: DETERMINADA. Nada desvia voc√™ do objetivo de completar o est√°gio.\n- MENSAGEM INICIAL: {{ $('Seta perfil').item.json.initialMessage }}\n\nDIAGN√ìSTICO DE ESTADO (Sua B√∫ssola):\n1. CONTEXTO PRIORIT√ÅRIO (LastVar): \"{{ $('Seta lastVar solicitada').item.json.lastVar }}\"\n   * REGRA DE OURO: Antes de qualquer varredura, verifique se a mensagem do usu√°rio responde a ESTA vari√°vel.\n2. MAPA DE VARI√ÅVEIS (Refer√™ncia de Extra√ß√£o):\n{{ $('Transforma vari√°veis em tabela').first().json.tableMarkdown }}\n\nDEFINI√á√ÉO DE TOOLS:\n- `UP(name, value)`: MEM√ìRIA. Salva o dado extra√≠do. PRIORIDADE M√ÅXIMA. Deve rodar antes de tudo.\n- `BK(query)`: C√âREBRO EXTERNO. √öNICA FONTE DE VERDADE.\n- `GET_STAGE()`: DIRE√á√ÉO. Retorna a pr√≥xima instru√ß√£o. DEPEND√äNCIA: S√≥ pode ser chamada AP√ìS a atualiza√ß√£o das vari√°veis (`UP`).\n- `PROP()`: A√á√ÉO. Dispara o envio do PDF/Apresenta√ß√£o.\n\n### PROTOCOLO DE EXECU√á√ÉO (L√ìGICA SEQUENCIAL RIGOROSA):\n\n1. AN√ÅLISE DE INPUT & ATUALIZA√á√ÉO (PASSO OBRIGAT√ìRIO INICIAL):\n\n   A) EXTRA√á√ÉO DE DADOS (UP) - Varredura Global:\n      - Existem dados na mensagem que preenchem QUALQUER vari√°vel do Mapa?\n        -> SIM: CALL `UP(nome_da_var, valor)`. (Fa√ßa isso para TODOS os dados encontrados).\n      - REGRA DE OURO: Se voc√™ identificou um dado, o `UP` DEVE ser a primeira tool a ser chamada na lista.\n\n   B) DETEC√á√ÉO DE D√öVIDA (BK) - BLOQUEIO DE MEM√ìRIA:\n      - O usu√°rio fez QUALQUER pergunta?\n      - A√á√ÉO: FORCE CALL `BK`.\n\n   C) SENTIMENTO/OFENSA?\n      - A√á√ÉO: Mantenha a calma. Valide a frustra√ß√£o brevemente.\n\n2. CHECK DE ESTADO (CR√çTICO / OBRIGAT√ìRIO) üõë:\n   - DEPEND√äNCIA DE DADOS: Se voc√™ chamou `UP` no passo 1, certifique-se de que ele foi processado antes de chamar esta tool.\n   - EXECUTE SEMPRE `GET_STAGE()`.\n   - O `GET_STAGE` precisa ler as vari√°veis J√Å ATUALIZADAS pelo `UP` para decidir o pr√≥ximo passo.\n   - REGRA ANTI-PREGUI√áA: Mesmo que o usu√°rio diga apenas \"Ol√°\", CHAME `GET_STAGE()`.\n   - REGRA PROP: Se instru√ß√£o for \"Enviar PDF\" -> CALL `PROP` -> CALL `GET_STAGE()` novamente.\n\n3. FILTRO RAG & RESPOSTA (ANTI-ALUCINA√á√ÉO) üõë:\n   - Se chamou `BK`, valide o retorno com RIGOR:\n     * O texto responde EXPLICITAMENTE a d√∫vida do usu√°rio?\n     * SIM: Responda a d√∫vida de forma direta.\n     * N√ÉO/LIXO/VAZIO: DIGA: \"N√£o tenho essa informa√ß√£o espec√≠fica aqui, mas voc√™ pode conferir em {{ $('Seta perfil').item.json.companySite }}.\"\n     * PROIBIDO: Inventar funcionalidades ou deduzir \"Sim\" sem provas.\n\n### FORMATO DE SA√çDA (FINAL OUTPUT):\nConstrua sua resposta nesta ordem exata:\n1. (CHECK ZERO - SAUDA√á√ÉO):\n   - Se `LastVar` for vazio/nulo (In√≠cio de conversa):\n   - INICIE OBRIGATORIAMENTE COM: {{ $('Seta perfil').item.json.initialMessage }} e pule para o passo 5.\n2. (Se necess√°rio) Valida√ß√£o breve de sentimento/desculpa.\n3. (Se houve d√∫vida) Resposta Validada do BK (OU NADA, se BK n√£o foi chamado).\n4. (Sempre - A PONTE) Frase de transi√ß√£o (\"Entendido...\", \"Mas voltando...\", \"Para avan√ßarmos...\").\n5. (Sempre - O ALVO) A PERGUNTA OBRIGAT√ìRIA do `GET_STAGE()`.\n\nIDIOMA: pt-BR. CURTO (M√°x 2 par√°grafos).\n\n### DIRETRIZES T√âCNICAS (ANTI-BUG DE LOG):\n- SIL√äNCIO OPERACIONAL: JAMAIS escreva `[Used tools...]`, `Thought:` ou detalhes t√©cnicos na resposta final."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":3,"position":[-528,-16],"id":"b98b652f-5d43-4927-9970-384ff383da31","name":"AI Agent"}],"connections":{"Transforma vari√°veis em tabela":{"main":[[{"node":"Seta perfil","type":"main","index":0}]]},"Retorna chatInput":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Busca vari√°veis":{"main":[[{"node":"Busca est√°gios","type":"main","index":0}]]},"Cria cache key":{"main":[[{"node":"If","type":"main","index":0}]]},"Seta est√°gios":{"main":[[{"node":"Retorna chatInput","type":"main","index":0}]]},"Seta perfil":{"main":[[{"node":"Seta lastVar solicitada","type":"main","index":0}]]},"Seta vari√°veis da conversa":{"main":[[{"node":"Transforma vari√°veis em tabela","type":"main","index":0}]]},"Webhook":{"main":[[{"node":"Retorna message","type":"main","index":0}]]},"Retorna message":{"main":[[{"node":"Cria cache key","type":"main","index":0}]]},"HTTP Request":{"main":[[{"node":"Seta cache das variaveis","type":"main","index":0}]]},"Busca last var":{"main":[[{"node":"Busca vari√°veis","type":"main","index":0}]]},"Seta lastVar solicitada":{"main":[[{"node":"Seta est√°gios","type":"main","index":0}]]},"Seta cache das variaveis":{"main":[[{"node":"Seta cache lastVar solicitada","type":"main","index":0}]]},"Deleta cache lastVar":{"main":[[{"node":"Delete cache variaveis","type":"main","index":0}]]},"Busca est√°gios":{"main":[[{"node":"Seta vari√°veis da conversa","type":"main","index":0}]]},"Seta cache lastVar solicitada":{"main":[[{"node":"Seta cache est√°gios","type":"main","index":0}]]},"Delete cache variaveis":{"main":[[{"node":"Deleta cache est√°gios","type":"main","index":0}]]},"Parse na resposta":{"main":[[{"node":"HTTP Request","type":"main","index":0}]]},"Deleta cache est√°gios":{"main":[[{"node":"Delete table or rows","type":"main","index":0}]]},"If":{"main":[[{"node":"Deleta cache lastVar","type":"main","index":0}],[{"node":"Busca last var","type":"main","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"Busca informa√ß√µes do banco de dados","type":"ai_embedding","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Enviar apresenta√ß√£o comercial":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Busca est√°gio atual":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Busca informa√ß√µes do banco de dados":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Atualizar param√™tros":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"AI Agent":{"main":[[{"node":"Parse na resposta","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Webhook":[{"json":{"headers":{"host":"n8n.apresenta.me","x-real-ip":"172.68.191.167","x-real-port":"16429","x-forwarded-for":"131.72.111.129, 172.68.191.167","x-forwarded-proto":"http","x-forwarded-host":"n8n.apresenta.me","x-forwarded-port":"80","remote-host":"172.68.191.167","connection":"close","content-length":"699","accept":"application/json, text/plain, */*","accept-encoding":"gzip, br","user-agent":"axios/1.12.2","cf-ray":"9ab53fec6889a623-NVT","content-type":"application/json","cdn-loop":"cloudflare; loops=1","cf-connecting-ip":"131.72.111.129","cf-ipcountry":"BR","cf-visitor":"{\"scheme\":\"https\"}"},"params":{},"query":{},"body":{"message":"Opa","messageId":"2570999","contact":{"id":"38043","name":"554788950332","number":"554788950332","profilePicUrl":"https://pps.whatsapp.net/v/t61.24694-24/425105449_1361615211300388_1143514098522857072_n.jpg?ccb=11-4&oh=01_Q5Aa3QERRZEMX41fiFJXlx4zD8Bu_OAT6NEm3DGP4g7W2i6CAQ&oe=69453A23&_nc_sid=5e03e0&_nc_cat=102","createdAt":"2025-10-09T16:20:11.311-03:00","updatedAt":"2025-12-09T11:38:56.171-03:00","email":"","isGroup":false,"companyId":"5005","whatsappId":"1","onlyResponsible":false,"userId":"1","aprePersonId":"4916708","apreDealId":null,"blocked":false,"meta":{"ignoreCheck":true,"ignorePermission":true,"dontSendSocket":false}},"whatsappId":"1","companyId":5005,"ticketId":87894},"webhookUrl":"https://n8n.apresenta.me/webhook/7223c6af-f595-4bc2-b84c-602b8900cd08","executionMode":"production"}}]},"versionId":"30dae661-87b5-4901-8355-6f794fedea0e","triggerCount":1,"shared":[{"updatedAt":"2025-11-04T18:47:16.654Z","createdAt":"2025-11-04T18:47:16.654Z","role":"workflow:owner","workflowId":"dDaZdsSmHxktrhjc","projectId":"4ToGMYJEWvvDSbcz"}],"tags":[]}